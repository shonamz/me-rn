{"ast":null,"code":"import _objectSpread from\"/Users/anabella/Desktop/ramona/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/anabella/Desktop/ramona/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _classCallCheck from\"/Users/anabella/Desktop/ramona/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/anabella/Desktop/ramona/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/anabella/Desktop/ramona/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/anabella/Desktop/ramona/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Menu from'./MenuComponent';import DishDetail from'./DishDetailComponent';import Header from'./HeaderComponent';import Footer from'./FooterComponent';import Home from'./HomeComponent';import Contact from'./ContactComponent';import About from'./AboutComponent';import{Switch,Route,Redirect,withRouter}from'react-router-dom';import{connect}from'react-redux';import{actions}from'react-redux-form';import{TransitionGroup,CSSTransition}from'react-transition-group';import Favorites from'./FavoriteComponent';import{postComment as _postComment,postFeedback as _postFeedback,fetchDishes as _fetchDishes,fetchComments as _fetchComments,fetchPromos as _fetchPromos,fetchLeaders as _fetchLeaders,loginUser as _loginUser,logoutUser as _logoutUser,registerUser as _registerUser,fetchFavorites as _fetchFavorites,postFavorite as _postFavorite,deleteFavorite as _deleteFavorite,loginUserFacebook as _loginUserFacebook}from'../redux/ActionCreators';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var mapStateToProps=function mapStateToProps(state){return{dishes:state.dishes,comments:state.comments,promotions:state.promotions,leaders:state.leaders,favorites:state.favorites,auth:state.auth};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{postComment:function postComment(dishId,rating,comment){return dispatch(_postComment(dishId,rating,comment));},fetchDishes:function fetchDishes(){dispatch(_fetchDishes());},resetFeedbackForm:function resetFeedbackForm(){dispatch(actions.reset('feedback'));},fetchComments:function fetchComments(){dispatch(_fetchComments());},fetchPromos:function fetchPromos(){dispatch(_fetchPromos());},fetchLeaders:function fetchLeaders(){return dispatch(_fetchLeaders());},postFeedback:function postFeedback(feedback){return dispatch(_postFeedback(feedback));},loginUser:function loginUser(creds){return dispatch(_loginUser(creds));},loginUserFacebook:function loginUserFacebook(){return dispatch(_loginUserFacebook());},registerUser:function registerUser(creds){return dispatch(_registerUser(creds));},logoutUser:function logoutUser(){return dispatch(_logoutUser());},fetchFavorites:function fetchFavorites(){return dispatch(_fetchFavorites());},postFavorite:function postFavorite(dishId){return dispatch(_postFavorite(dishId));},deleteFavorite:function deleteFavorite(dishId){return dispatch(_deleteFavorite(dishId));}};};var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(){_classCallCheck(this,Main);return _super.apply(this,arguments);}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.fetchDishes();this.props.fetchComments();this.props.fetchPromos();this.props.fetchLeaders();this.props.fetchFavorites();}},{key:\"render\",value:function render(){var _this=this;var HomePage=function HomePage(){return/*#__PURE__*/_jsx(Home,{dish:_this.props.dishes.dishes.filter(function(dish){return dish.featured;})[0],dishesLoading:_this.props.dishes.isLoading,dishesErrMess:_this.props.dishes.errMess,promotion:_this.props.promotions.promotions.filter(function(promo){return promo.featured;})[0],promosLoading:_this.props.promotions.isLoading,promosErrMess:_this.props.promotions.errMess,leader:_this.props.leaders.leaders.filter(function(leader){return leader.featured;})[0],leaderLoading:_this.props.leaders.isLoading,leaderErrMess:_this.props.leaders.errMess});};var DishWithId=function DishWithId(_ref){var match=_ref.match;if(_this.props.favorites.favorites!==''&&_this.props.favorites.favorites!==null){console.log(\"here\");if(Array.isArray(_this.props.favorites.favorites))_this.props.favorites.favorites=_this.props.favorites.favorites[0];console.log(\"here 2\");console.log(_this.props.favorites.favorites);}return _this.props.auth.isAuthenticated&&!_this.props.favorites.isLoading&&_this.props.favorites.favorites!==''&&_this.props.favorites.favorites!=null?/*#__PURE__*/_jsx(DishDetail,{dish:_this.props.dishes.dishes.filter(function(dish){return dish._id===match.params.dishId;})[0],isLoading:_this.props.dishes.isLoading,errMess:_this.props.dishes.errMess,comments:_this.props.comments.comments.filter(function(comment){return comment.dish===match.params.dishId;}),commentsErrMess:_this.props.comments.errMess,postComment:_this.props.postComment,favorite:_this.props.favorites.favorites.dishes.some(function(dish){return dish._id===match.params.dishId;}),postFavorite:_this.props.postFavorite}):/*#__PURE__*/_jsx(DishDetail,{dish:_this.props.dishes.dishes.filter(function(dish){return dish._id===match.params.dishId;})[0],isLoading:_this.props.dishes.isLoading,errMess:_this.props.dishes.errMess,comments:_this.props.comments.comments.filter(function(comment){return comment.dish===match.params.dishId;}),commentsErrMess:_this.props.comments.errMess,postComment:_this.props.postComment,favorite:false,postFavorite:_this.props.postFavorite});};var PrivateRoute=function PrivateRoute(_ref2){var Component=_ref2.component,rest=_objectWithoutProperties(_ref2,[\"component\"]);return/*#__PURE__*/_jsx(Route,_objectSpread(_objectSpread({},rest),{},{render:function render(props){return _this.props.auth.isAuthenticated?/*#__PURE__*/_jsx(Component,_objectSpread({},props)):/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/home',state:{from:props.location}}});}}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{auth:this.props.auth,loginUser:this.props.loginUser,logoutUser:this.props.logoutUser,loginUserFacebook:this.props.loginUserFacebook,registerUser:this.props.registerUser}),/*#__PURE__*/_jsx(TransitionGroup,{children:/*#__PURE__*/_jsx(CSSTransition,{classNames:\"page\",timeout:300,children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/home\",component:HomePage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/aboutus\",component:function component(){return/*#__PURE__*/_jsx(About,{leaders:_this.props.leaders});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/menu\",component:function component(){return/*#__PURE__*/_jsx(Menu,{dishes:_this.props.dishes});}}),/*#__PURE__*/_jsx(Route,{path:\"/menu/:dishId\",component:DishWithId}),/*#__PURE__*/_jsx(PrivateRoute,{exact:true,path:\"/favorites\",component:function component(){return/*#__PURE__*/_jsx(Favorites,{favorites:_this.props.favorites,deleteFavorite:_this.props.deleteFavorite});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/contactus\",component:function component(){return/*#__PURE__*/_jsx(Contact,{resetFeedbackForm:_this.props.resetFeedbackForm,postFeedback:_this.props.postFeedback});}}),/*#__PURE__*/_jsx(Redirect,{to:\"/home\"})]})},this.props.location.key)}),/*#__PURE__*/_jsx(Footer,{})]});}}]);return Main;}(Component);export default withRouter(connect(mapStateToProps,mapDispatchToProps)(Main));","map":{"version":3,"sources":["/Users/anabella/Desktop/ramona/src/components/MainComponent.js"],"names":["React","Component","Menu","DishDetail","Header","Footer","Home","Contact","About","Switch","Route","Redirect","withRouter","connect","actions","TransitionGroup","CSSTransition","Favorites","postComment","postFeedback","fetchDishes","fetchComments","fetchPromos","fetchLeaders","loginUser","logoutUser","registerUser","fetchFavorites","postFavorite","deleteFavorite","loginUserFacebook","mapStateToProps","state","dishes","comments","promotions","leaders","favorites","auth","mapDispatchToProps","dispatch","dishId","rating","comment","resetFeedbackForm","reset","feedback","creds","Main","props","HomePage","filter","dish","featured","isLoading","errMess","promo","leader","DishWithId","match","console","log","Array","isArray","isAuthenticated","_id","params","some","PrivateRoute","component","rest","pathname","from","location","key"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Menu from './MenuComponent';\nimport DishDetail from './DishDetailComponent';\nimport Header from './HeaderComponent';\nimport Footer from './FooterComponent';\nimport Home from './HomeComponent';\nimport Contact from './ContactComponent';\nimport About from './AboutComponent';\nimport { Switch, Route, Redirect, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { actions } from 'react-redux-form';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport Favorites from './FavoriteComponent';\nimport { postComment, postFeedback, fetchDishes, fetchComments, fetchPromos, fetchLeaders, loginUser, logoutUser,registerUser, fetchFavorites, postFavorite, deleteFavorite, loginUserFacebook } from '../redux/ActionCreators';\n  \n \n\nconst mapStateToProps = state => {\n  return {\n    dishes: state.dishes,\n    comments: state.comments,\n    promotions: state.promotions,\n    leaders: state.leaders,\n    favorites: state.favorites,\n    auth: state.auth\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\npostComment: (dishId, rating, comment) => dispatch(postComment(dishId, rating, comment)),\nfetchDishes: () => {dispatch(fetchDishes())},\nresetFeedbackForm: () => { dispatch(actions.reset('feedback'))},\nfetchComments: () => {dispatch(fetchComments())},\nfetchPromos: () => {dispatch(fetchPromos())},\nfetchLeaders: () => dispatch(fetchLeaders()),\npostFeedback: (feedback) => dispatch(postFeedback(feedback)),\nloginUser: (creds) => dispatch(loginUser(creds)),\nloginUserFacebook:()=>dispatch(loginUserFacebook()),\nregisterUser: (creds) => dispatch(registerUser(creds)),\nlogoutUser: () => dispatch(logoutUser()),\nfetchFavorites: () => dispatch(fetchFavorites()),\npostFavorite: (dishId) => dispatch(postFavorite(dishId)),\ndeleteFavorite: (dishId) => dispatch(deleteFavorite(dishId))\n});\n\nclass Main extends Component {\n\ncomponentDidMount() {\n  this.props.fetchDishes();\n  this.props.fetchComments();\n  this.props.fetchPromos();\n  this.props.fetchLeaders();\n  this.props.fetchFavorites();\n}\n\nrender() {\n\n  const HomePage = () => {\n    return(\n      <Home dish={this.props.dishes.dishes.filter((dish) => dish.featured)[0]}\n        dishesLoading={this.props.dishes.isLoading}\n        dishesErrMess={this.props.dishes.errMess}\n        promotion={this.props.promotions.promotions.filter((promo) => promo.featured)[0]}\n        promosLoading={this.props.promotions.isLoading}\n        promosErrMess={this.props.promotions.errMess}\n        leader={this.props.leaders.leaders.filter((leader) => leader.featured)[0]}\n        leaderLoading={this.props.leaders.isLoading}\n        leaderErrMess={this.props.leaders.errMess}\n      />\n    );\n  }\n\n  const DishWithId = ({match}) => {\n    if(this.props.favorites.favorites!=='' && this.props.favorites.favorites!== null ){\n      console.log(\"here\");\n    if(Array.isArray(this.props.favorites.favorites))\n    this.props.favorites.favorites=this.props.favorites.favorites[0];\n     console.log(\"here 2\")\n     console.log(this.props.favorites.favorites)\n    }\n    return(\n    (this.props.auth.isAuthenticated && !this.props.favorites.isLoading && this.props.favorites.favorites!=='' && this.props.favorites.favorites!= null )\n    ?\n    <DishDetail dish={this.props.dishes.dishes.filter((dish) => dish._id === match.params.dishId)[0]}\n    isLoading={this.props.dishes.isLoading}\n    errMess={this.props.dishes.errMess}\n    comments={this.props.comments.comments.filter((comment) => comment.dish === match.params.dishId)}\n    commentsErrMess={this.props.comments.errMess}\n    postComment={this.props.postComment}\n    favorite={this.props.favorites.favorites.dishes.some((dish) => dish._id === match.params.dishId)}\n    postFavorite={this.props.postFavorite}\n    />\n    :\n    <DishDetail dish={this.props.dishes.dishes.filter((dish) => dish._id === match.params.dishId)[0]}\n    isLoading={this.props.dishes.isLoading}\n    errMess={this.props.dishes.errMess}\n    comments={this.props.comments.comments.filter((comment) => comment.dish === match.params.dishId)}\n    commentsErrMess={this.props.comments.errMess}\n    postComment={this.props.postComment}\n    favorite={false}\n    postFavorite={this.props.postFavorite}\n    />\n    );\n    }\n\n  const PrivateRoute = ({ component: Component, ...rest }) => (\n    <Route {...rest} render={(props) => (\n      this.props.auth.isAuthenticated\n        ? <Component {...props} />\n        : <Redirect to={{\n            pathname: '/home',\n            state: { from: props.location }\n          }} />\n    )} />\n  );\n\n  return (\n    <div>\n      <Header auth={this.props.auth} \n        loginUser={this.props.loginUser} \n        logoutUser={this.props.logoutUser}\n        loginUserFacebook={this.props.loginUserFacebook}\n        registerUser={this.props.registerUser}\n        />   \n      <TransitionGroup>\n        <CSSTransition key={this.props.location.key} classNames=\"page\" timeout={300}>\n          <Switch>\n            <Route path=\"/home\" component={HomePage} />\n            <Route exact path='/aboutus' component={() => <About leaders={this.props.leaders} />} />\n            <Route exact path=\"/menu\" component={() => <Menu dishes={this.props.dishes} />} />\n            <Route path=\"/menu/:dishId\" component={DishWithId} />\n            <PrivateRoute exact path=\"/favorites\" component={() => <Favorites favorites={this.props.favorites} deleteFavorite={this.props.deleteFavorite} />} />\n            <Route exact path=\"/contactus\" component={() => <Contact resetFeedbackForm={this.props.resetFeedbackForm} postFeedback={this.props.postFeedback} />} />\n            <Redirect to=\"/home\" />\n          </Switch>\n        </CSSTransition>\n      </TransitionGroup>\n      <Footer />\n    </div>\n  );\n}\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Main));\n"]},"metadata":{},"sourceType":"module"}