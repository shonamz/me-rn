{"ast":null,"code":"import*as ActionTypes from'./ActionTypes';import{baseUrl}from'../shared/baseUrl';export var addComment=function addComment(comment){return{type:ActionTypes.ADD_COMMENT,payload:comment};};export var postComment=function postComment(dishId,rating,comment){return function(dispatch){var newComment={dish:dishId,rating:rating,comment:comment};console.log('Comment ',newComment);var bearer='Bearer '+localStorage.getItem('token');return fetch(baseUrl+'comments',{method:'POST',body:JSON.stringify(newComment),headers:{'Content-Type':'application/json','Authorization':bearer},credentials:'same-origin'}).then(function(response){if(response.ok){return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){var errmess=new Error(error.message);throw errmess;}).then(function(response){return response.json();}).then(function(response){return dispatch(addComment(response));}).catch(function(error){console.log('Post comments ',error.message);alert('Your comment could not be posted\\nError: '+error.message);});};};export var fetchDishes=function fetchDishes(){return function(dispatch){dispatch(dishesLoading(true));return fetch(baseUrl+'dishes').then(function(response){if(response.ok){return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){var errmess=new Error(error.message);throw errmess;}).then(function(response){return response.json();}).then(function(dishes){return dispatch(addDishes(dishes));}).catch(function(error){return dispatch(dishesFailed(error.message));});};};export var dishesLoading=function dishesLoading(){return{type:ActionTypes.DISHES_LOADING};};export var dishesFailed=function dishesFailed(errmess){return{type:ActionTypes.DISHES_FAILED,payload:errmess};};export var addDishes=function addDishes(dishes){return{type:ActionTypes.ADD_DISHES,payload:dishes};};export var fetchComments=function fetchComments(){return function(dispatch){return fetch(baseUrl+'comments').then(function(response){if(response.ok){return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){var errmess=new Error(error.message);throw errmess;}).then(function(response){return response.json();}).then(function(comments){return dispatch(addComments(comments));}).catch(function(error){return dispatch(commentsFailed(error.message));});};};export var commentsFailed=function commentsFailed(errmess){return{type:ActionTypes.COMMENTS_FAILED,payload:errmess};};export var addComments=function addComments(comments){return{type:ActionTypes.ADD_COMMENTS,payload:comments};};export var fetchPromos=function fetchPromos(){return function(dispatch){dispatch(promosLoading(true));return fetch(baseUrl+'promotions').then(function(response){if(response.ok){return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){var errmess=new Error(error.message);throw errmess;}).then(function(response){return response.json();}).then(function(promos){return dispatch(addPromos(promos));}).catch(function(error){return dispatch(promosFailed(error.message));});};};export var promosLoading=function promosLoading(){return{type:ActionTypes.PROMOS_LOADING};};export var promosFailed=function promosFailed(errmess){return{type:ActionTypes.PROMOS_FAILED,payload:errmess};};export var addPromos=function addPromos(promos){return{type:ActionTypes.ADD_PROMOS,payload:promos};};export var fetchLeaders=function fetchLeaders(){return function(dispatch){dispatch(leadersLoading());return fetch(baseUrl+'leaders').then(function(response){if(response.ok){return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){var errmess=new Error(error.message);throw errmess;}).then(function(response){return response.json();}).then(function(leaders){return dispatch(addLeaders(leaders));}).catch(function(error){return dispatch(leadersFailed(error.message));});};};export var leadersLoading=function leadersLoading(){return{type:ActionTypes.LEADERS_LOADING};};export var leadersFailed=function leadersFailed(errmess){return{type:ActionTypes.LEADERS_FAILED,payload:errmess};};export var addLeaders=function addLeaders(leaders){return{type:ActionTypes.ADD_LEADERS,payload:leaders};};export var feedbackFailed=function feedbackFailed(errmess){return{type:ActionTypes.FEEDBACK_FAILED,payload:errmess};};export var addFeedback=function addFeedback(feedback){return{type:ActionTypes.ADD_FEEDBACK,payload:feedback};};export var postFeedback=function postFeedback(feedback){return function(dispatch){return fetch(baseUrl+'feedbacks',{method:\"POST\",body:JSON.stringify(feedback),headers:{\"Content-Type\":\"application/json\"},credentials:\"same-origin\"}).then(function(response){if(response.ok){return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){throw error;}).then(function(response){return response.json();}).then(function(response){return dispatch(addFeedback(response));}).then(function(response){console.log('Feedback',response);alert('Thank you for your feedback!\\n'+JSON.stringify(response));}).catch(function(error){console.log('Feedback',error.message);alert('Your feedback could not be posted\\nError: '+error.message);});};};export var requestLogin=function requestLogin(creds){return{type:ActionTypes.LOGIN_REQUEST,creds:creds};};export var receiveLogin=function receiveLogin(response){return{type:ActionTypes.LOGIN_SUCCESS,token:response.token};};export var loginError=function loginError(message){return{type:ActionTypes.LOGIN_FAILURE,message:message};};export var loginUser=function loginUser(creds){return function(dispatch){// We dispatch requestLogin to kickoff the call to the API\ndispatch(requestLogin(creds));return fetch(baseUrl+'users/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(creds)}).then(function(response){if(response.ok){return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){throw error;}).then(function(response){return response.json();}).then(function(response){if(response.success){// If login was successful, set the token in local storage\nlocalStorage.setItem('token',response.token);localStorage.setItem('creds',JSON.stringify(creds));// Dispatch the success action\ndispatch(fetchFavorites());dispatch(receiveLogin(response));}else{var error=new Error('Error '+response.status);error.response=response;throw error;}}).catch(function(error){return dispatch(loginError(error.message));});};};export var requestLogout=function requestLogout(){return{type:ActionTypes.LOGOUT_REQUEST};};export var receiveLogout=function receiveLogout(){return{type:ActionTypes.LOGOUT_SUCCESS};};// Logs the user out\nexport var logoutUser=function logoutUser(){return function(dispatch){dispatch(requestLogout());localStorage.removeItem('token');localStorage.removeItem('creds');dispatch(favoritesFailed(\"Error 401: Unauthorized\"));dispatch(receiveLogout());};};export var postFavorite=function postFavorite(dishId){return function(dispatch){var bearer='Bearer '+localStorage.getItem('token');return fetch(baseUrl+'favorites/'+dishId,{method:\"POST\",body:JSON.stringify({\"_id\":dishId}),headers:{\"Content-Type\":\"application/json\",'Authorization':bearer},credentials:\"same-origin\"}).then(function(response){if(response.ok){return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){throw error;}).then(function(response){return response.json();}).then(function(favorites){console.log('Favorite Added',favorites);dispatch(addFavorites(favorites));}).catch(function(error){return dispatch(favoritesFailed(error.message));});};};export var deleteFavorite=function deleteFavorite(dishId){return function(dispatch){var bearer='Bearer '+localStorage.getItem('token');return fetch(baseUrl+'favorites/'+dishId,{method:\"DELETE\",headers:{'Authorization':bearer},credentials:\"same-origin\"}).then(function(response){if(response.ok){return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){throw error;}).then(function(response){return response.json();}).then(function(favorites){console.log('Favorite Deleted',favorites);dispatch(addFavorites(favorites));}).catch(function(error){return dispatch(favoritesFailed(error.message));});};};export var fetchFavorites=function fetchFavorites(){return function(dispatch){dispatch(favoritesLoading(true));var bearer='Bearer '+localStorage.getItem('token');return fetch(baseUrl+'favorites',{headers:{'Authorization':bearer}}).then(function(response){if(response.ok){return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){var errmess=new Error(error.message);throw errmess;}).then(function(response){return response.json();}).then(function(favorites){return dispatch(addFavorites(favorites));}).catch(function(error){return dispatch(favoritesFailed(error.message));});};};export var favoritesLoading=function favoritesLoading(){return{type:ActionTypes.FAVORITES_LOADING};};export var favoritesFailed=function favoritesFailed(errmess){return{type:ActionTypes.FAVORITES_FAILED,payload:errmess};};export var addFavorites=function addFavorites(favorites){return{type:ActionTypes.ADD_FAVORITES,payload:favorites};};export var addUser=function addUser(newUser){return{type:ActionTypes.ADD_USER,payload:newUser};};export var registerUser=function registerUser(newUser){return function(dispatch){return fetch(baseUrl+'users/signup',{method:\"POST\",body:JSON.stringify(newUser),headers:{\"Content-Type\":\"application/json\"},credentials:\"same-origin\"}).then(function(response){if(response.ok){return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){throw error;}).then(function(response){return response.json();}).then(function(response){return dispatch(addUser(response));}).then(function(response){console.log('newUser',response);alert('Thank you for your Register!\\n'+JSON.stringify(response));}).catch(function(error){console.log('NewUser',error.message);alert('Your could not register\\nError: '+error.message);});};};export var LOGIN_REQUEST_FACEBOOK='LOGIN_REQUEST_FACEBOOK';export var LOGIN_SUCCESS_FACEBOOK='LOGIN_SUCCESS_FACEBOOK';export var LOGIN_FAILURE_FACEBOOK='LOGIN_FAILURE_FACEBOOK';export var requestLoginFacebook=function requestLoginFacebook(){return{type:ActionTypes.LOGIN_REQUEST_FACEBOOK};};export var receiveLoginFacebook=function receiveLoginFacebook(response){return{type:ActionTypes.LOGIN_SUCCESS_FACEBOOK,token:response.token};};export var loginErrorFacebook=function loginErrorFacebook(message){return{type:ActionTypes.LOGIN_FAILURE_FACEBOOK,message:message};};export var loginUserFacebook=function loginUserFacebook(){return function(dispatch){// We dispatch requestLogin to kickoff the call to the API\ndispatch(requestLoginFacebook());return fetch(baseUrl+'users/facebook/token').then(function(response){if(response.ok){console.log('resopnse...............'+response);return response;}else{var error=new Error('Error '+response.status+': '+response.statusText);error.response=response;throw error;}},function(error){throw error;}).then(function(response){return response.json();}).then(function(response){if(response.success){// If login was successful, set the token in local storage\nlocalStorage.setItem('token',response.token);// localStorage.setItem('creds', JSON.stringify(creds));\n// Dispatch the success action\ndispatch(fetchFavorites());dispatch(receiveLoginFacebook(response));}else{var error=new Error('Error '+response.status);error.response=response;throw error;}}).catch(function(error){return dispatch(loginErrorFacebook(error.message));});};};","map":{"version":3,"sources":["/Users/anabella/Desktop/ramona/src/redux/ActionCreators.js"],"names":["ActionTypes","baseUrl","addComment","comment","type","ADD_COMMENT","payload","postComment","dishId","rating","dispatch","newComment","dish","console","log","bearer","localStorage","getItem","fetch","method","body","JSON","stringify","headers","credentials","then","response","ok","error","Error","status","statusText","errmess","message","json","catch","alert","fetchDishes","dishesLoading","dishes","addDishes","dishesFailed","DISHES_LOADING","DISHES_FAILED","ADD_DISHES","fetchComments","comments","addComments","commentsFailed","COMMENTS_FAILED","ADD_COMMENTS","fetchPromos","promosLoading","promos","addPromos","promosFailed","PROMOS_LOADING","PROMOS_FAILED","ADD_PROMOS","fetchLeaders","leadersLoading","leaders","addLeaders","leadersFailed","LEADERS_LOADING","LEADERS_FAILED","ADD_LEADERS","feedbackFailed","FEEDBACK_FAILED","addFeedback","feedback","ADD_FEEDBACK","postFeedback","requestLogin","creds","LOGIN_REQUEST","receiveLogin","LOGIN_SUCCESS","token","loginError","LOGIN_FAILURE","loginUser","success","setItem","fetchFavorites","requestLogout","LOGOUT_REQUEST","receiveLogout","LOGOUT_SUCCESS","logoutUser","removeItem","favoritesFailed","postFavorite","favorites","addFavorites","deleteFavorite","favoritesLoading","FAVORITES_LOADING","FAVORITES_FAILED","ADD_FAVORITES","addUser","newUser","ADD_USER","registerUser","LOGIN_REQUEST_FACEBOOK","LOGIN_SUCCESS_FACEBOOK","LOGIN_FAILURE_FACEBOOK","requestLoginFacebook","receiveLoginFacebook","loginErrorFacebook","loginUserFacebook"],"mappings":"AAAA,MAAO,GAAKA,CAAAA,WAAZ,KAA6B,eAA7B,CACA,OAASC,OAAT,KAAwB,mBAAxB,CAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,OAAD,QAAc,CACpCC,IAAI,CAAEJ,WAAW,CAACK,WADkB,CAEpCC,OAAO,CAAEH,OAF2B,CAAd,EAAnB,CAKP,MAAO,IAAMI,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,MAAD,CAASC,MAAT,CAAiBN,OAAjB,QAA6B,UAACO,QAAD,CAAc,CAElE,GAAMC,CAAAA,UAAU,CAAG,CACfC,IAAI,CAAEJ,MADS,CAEfC,MAAM,CAAEA,MAFO,CAGfN,OAAO,CAAEA,OAHM,CAAnB,CAKAU,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBH,UAAxB,EAEA,GAAMI,CAAAA,MAAM,CAAG,UAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B,CAEA,MAAOC,CAAAA,KAAK,CAACjB,OAAO,CAAG,UAAX,CAAuB,CAC/BkB,MAAM,CAAE,MADuB,CAE/BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeX,UAAf,CAFyB,CAG/BY,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,gBAAiBR,MAFZ,CAHsB,CAO/BS,WAAW,CAAE,aAPkB,CAAvB,CAAL,CASNC,IATM,CASD,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACb,MAAOD,CAAAA,QAAP,CACH,CAFD,IAGK,CACD,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACH,CACJ,CAlBM,CAmBP,SAAAA,KAAK,CAAI,CACL,GAAII,CAAAA,OAAO,CAAG,GAAIH,CAAAA,KAAJ,CAAUD,KAAK,CAACK,OAAhB,CAAd,CACA,KAAMD,CAAAA,OAAN,CACH,CAtBM,EAuBNP,IAvBM,CAuBD,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAvBP,EAwBNT,IAxBM,CAwBD,SAAAC,QAAQ,QAAIhB,CAAAA,QAAQ,CAACR,UAAU,CAACwB,QAAD,CAAX,CAAZ,EAxBP,EAyBNS,KAzBM,CAyBA,SAAAP,KAAK,CAAI,CAAEf,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8Bc,KAAK,CAACK,OAApC,EACdG,KAAK,CAAC,4CAA6CR,KAAK,CAACK,OAApD,CAAL,CAAoE,CA1BjE,CAAP,CA2BH,CAtC0B,EAApB,CAwCP,MAAO,IAAMI,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAM,UAAC3B,QAAD,CAAc,CAC3CA,QAAQ,CAAC4B,aAAa,CAAC,IAAD,CAAd,CAAR,CAEA,MAAOpB,CAAAA,KAAK,CAACjB,OAAO,CAAG,QAAX,CAAL,CACFwB,IADE,CACG,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACb,MAAOD,CAAAA,QAAP,CACH,CAFD,IAGK,CACD,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACH,CACJ,CAVE,CAWH,SAAAA,KAAK,CAAI,CACL,GAAII,CAAAA,OAAO,CAAG,GAAIH,CAAAA,KAAJ,CAAUD,KAAK,CAACK,OAAhB,CAAd,CACA,KAAMD,CAAAA,OAAN,CACH,CAdE,EAeFP,IAfE,CAeG,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAfX,EAgBFT,IAhBE,CAgBG,SAAAc,MAAM,QAAI7B,CAAAA,QAAQ,CAAC8B,SAAS,CAACD,MAAD,CAAV,CAAZ,EAhBT,EAiBFJ,KAjBE,CAiBI,SAAAP,KAAK,QAAIlB,CAAAA,QAAQ,CAAC+B,YAAY,CAACb,KAAK,CAACK,OAAP,CAAb,CAAZ,EAjBT,CAAP,CAkBH,CArB0B,EAApB,CAuBP,MAAO,IAAMK,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,SAAO,CAChClC,IAAI,CAAEJ,WAAW,CAAC0C,cADc,CAAP,EAAtB,CAIP,MAAO,IAAMD,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACT,OAAD,QAAc,CACtC5B,IAAI,CAAEJ,WAAW,CAAC2C,aADoB,CAEtCrC,OAAO,CAAE0B,OAF6B,CAAd,EAArB,CAKP,MAAO,IAAMQ,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACD,MAAD,QAAa,CAClCnC,IAAI,CAAEJ,WAAW,CAAC4C,UADgB,CAElCtC,OAAO,CAAEiC,MAFyB,CAAb,EAAlB,CAKP,MAAO,IAAMM,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,SAAM,UAACnC,QAAD,CAAc,CAC7C,MAAOQ,CAAAA,KAAK,CAACjB,OAAO,CAAG,UAAX,CAAL,CACFwB,IADE,CACG,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACb,MAAOD,CAAAA,QAAP,CACH,CAFD,IAGK,CACD,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACH,CACJ,CAVE,CAWH,SAAAA,KAAK,CAAI,CACL,GAAII,CAAAA,OAAO,CAAG,GAAIH,CAAAA,KAAJ,CAAUD,KAAK,CAACK,OAAhB,CAAd,CACA,KAAMD,CAAAA,OAAN,CACH,CAdE,EAeFP,IAfE,CAeG,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAfX,EAgBFT,IAhBE,CAgBG,SAAAqB,QAAQ,QAAIpC,CAAAA,QAAQ,CAACqC,WAAW,CAACD,QAAD,CAAZ,CAAZ,EAhBX,EAiBFX,KAjBE,CAiBI,SAAAP,KAAK,QAAIlB,CAAAA,QAAQ,CAACsC,cAAc,CAACpB,KAAK,CAACK,OAAP,CAAf,CAAZ,EAjBT,CAAP,CAkBH,CAnB4B,EAAtB,CAqBP,MAAO,IAAMe,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAChB,OAAD,QAAc,CACxC5B,IAAI,CAAEJ,WAAW,CAACiD,eADsB,CAExC3C,OAAO,CAAE0B,OAF+B,CAAd,EAAvB,CAKP,MAAO,IAAMe,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACD,QAAD,QAAe,CACtC1C,IAAI,CAAEJ,WAAW,CAACkD,YADoB,CAEtC5C,OAAO,CAAEwC,QAF6B,CAAf,EAApB,CAKP,MAAO,IAAMK,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAM,UAACzC,QAAD,CAAc,CAC3CA,QAAQ,CAAC0C,aAAa,CAAC,IAAD,CAAd,CAAR,CAEA,MAAOlC,CAAAA,KAAK,CAACjB,OAAO,CAAG,YAAX,CAAL,CACFwB,IADE,CACG,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACb,MAAOD,CAAAA,QAAP,CACH,CAFD,IAGK,CACD,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACH,CACJ,CAVE,CAWH,SAAAA,KAAK,CAAI,CACL,GAAII,CAAAA,OAAO,CAAG,GAAIH,CAAAA,KAAJ,CAAUD,KAAK,CAACK,OAAhB,CAAd,CACA,KAAMD,CAAAA,OAAN,CACH,CAdE,EAeFP,IAfE,CAeG,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAfX,EAgBFT,IAhBE,CAgBG,SAAA4B,MAAM,QAAI3C,CAAAA,QAAQ,CAAC4C,SAAS,CAACD,MAAD,CAAV,CAAZ,EAhBT,EAiBFlB,KAjBE,CAiBI,SAAAP,KAAK,QAAIlB,CAAAA,QAAQ,CAAC6C,YAAY,CAAC3B,KAAK,CAACK,OAAP,CAAb,CAAZ,EAjBT,CAAP,CAkBH,CArB0B,EAApB,CAuBP,MAAO,IAAMmB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,SAAO,CAChChD,IAAI,CAAEJ,WAAW,CAACwD,cADc,CAAP,EAAtB,CAIP,MAAO,IAAMD,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACvB,OAAD,QAAc,CACtC5B,IAAI,CAAEJ,WAAW,CAACyD,aADoB,CAEtCnD,OAAO,CAAE0B,OAF6B,CAAd,EAArB,CAKP,MAAO,IAAMsB,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACD,MAAD,QAAa,CAClCjD,IAAI,CAAEJ,WAAW,CAAC0D,UADgB,CAElCpD,OAAO,CAAE+C,MAFyB,CAAb,EAAlB,CAKP,MAAO,IAAMM,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,SAAM,UAACjD,QAAD,CAAc,CAE5CA,QAAQ,CAACkD,cAAc,EAAf,CAAR,CAEA,MAAO1C,CAAAA,KAAK,CAACjB,OAAO,CAAG,SAAX,CAAL,CACNwB,IADM,CACD,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACb,MAAOD,CAAAA,QAAP,CACH,CAFD,IAEO,CACH,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACH,CACA,CATE,CAUH,SAAAA,KAAK,CAAI,CACL,GAAII,CAAAA,OAAO,CAAG,GAAIH,CAAAA,KAAJ,CAAUD,KAAK,CAACK,OAAhB,CAAd,CACA,KAAMD,CAAAA,OAAN,CACH,CAbE,EAcNP,IAdM,CAcD,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAdP,EAeNT,IAfM,CAeD,SAAAoC,OAAO,QAAInD,CAAAA,QAAQ,CAACoD,UAAU,CAACD,OAAD,CAAX,CAAZ,EAfN,EAgBN1B,KAhBM,CAgBA,SAAAP,KAAK,QAAIlB,CAAAA,QAAQ,CAACqD,aAAa,CAACnC,KAAK,CAACK,OAAP,CAAd,CAAZ,EAhBL,CAAP,CAiBH,CArB2B,EAArB,CAuBP,MAAO,IAAM2B,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,SAAO,CACjCxD,IAAI,CAAEJ,WAAW,CAACgE,eADe,CAAP,EAAvB,CAIP,MAAO,IAAMD,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAC/B,OAAD,QAAc,CACvC5B,IAAI,CAAEJ,WAAW,CAACiE,cADqB,CAEvC3D,OAAO,CAAE0B,OAF8B,CAAd,EAAtB,CAKP,MAAO,IAAM8B,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACD,OAAD,QAAc,CACpCzD,IAAI,CAAEJ,WAAW,CAACkE,WADkB,CAEpC5D,OAAO,CAAEuD,OAF2B,CAAd,EAAnB,CAMP,MAAO,IAAMM,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACnC,OAAD,QAAc,CACxC5B,IAAI,CAAEJ,WAAW,CAACoE,eADsB,CAExC9D,OAAO,CAAE0B,OAF+B,CAAd,EAAvB,CAKL,MAAO,IAAMqC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,QAAD,QAAe,CACxClE,IAAI,CAAEJ,WAAW,CAACuE,YADsB,CAExCjE,OAAO,CAAEgE,QAF+B,CAAf,EAApB,CAKT,MAAO,IAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACF,QAAD,QAAc,UAAC5D,QAAD,CAAc,CAEpD,MAAOQ,CAAAA,KAAK,CAACjB,OAAO,CAAG,WAAX,CAAwB,CAChCkB,MAAM,CAAE,MADwB,CAEhCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAegD,QAAf,CAF0B,CAGhC/C,OAAO,CAAE,CACP,eAAgB,kBADT,CAHuB,CAMhCC,WAAW,CAAE,aANmB,CAAxB,CAAL,CAQNC,IARM,CAQD,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACf,MAAOD,CAAAA,QAAP,CACD,CAFD,IAEO,CACL,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACD,CACF,CAhBI,CAiBL,SAAAA,KAAK,CAAI,CACH,KAAMA,CAAAA,KAAN,CACL,CAnBI,EAoBNH,IApBM,CAoBD,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EApBP,EAqBNT,IArBM,CAqBD,SAAAC,QAAQ,QAAIhB,CAAAA,QAAQ,CAAC2D,WAAW,CAAC3C,QAAD,CAAZ,CAAZ,EArBP,EAsBND,IAtBM,CAsBD,SAAAC,QAAQ,CAAI,CAAEb,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBY,QAAxB,EAAmCU,KAAK,CAAC,iCAAiCf,IAAI,CAACC,SAAL,CAAeI,QAAf,CAAlC,CAAL,CAAmE,CAtBnH,EAuBNS,KAvBM,CAuBA,SAAAP,KAAK,CAAK,CAAEf,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBc,KAAK,CAACK,OAA9B,EAAwCG,KAAK,CAAC,6CAA6CR,KAAK,CAACK,OAApD,CAAL,CAAoE,CAvBxH,CAAP,CAwBH,CA1B2B,EAArB,CA4BP,MAAO,IAAMwC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CACnC,MAAO,CACHtE,IAAI,CAAEJ,WAAW,CAAC2E,aADf,CAEHD,KAAK,CAALA,KAFG,CAAP,CAIH,CALM,CAOP,MAAO,IAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAClD,QAAD,CAAc,CACtC,MAAO,CACHtB,IAAI,CAAEJ,WAAW,CAAC6E,aADf,CAEHC,KAAK,CAAEpD,QAAQ,CAACoD,KAFb,CAAP,CAIH,CALM,CAOP,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAC9C,OAAD,CAAa,CACnC,MAAO,CACH7B,IAAI,CAAEJ,WAAW,CAACgF,aADf,CAEH/C,OAAO,CAAPA,OAFG,CAAP,CAIH,CALM,CAOP,MAAO,IAAMgD,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACP,KAAD,QAAW,UAAChE,QAAD,CAAc,CAC9C;AACAA,QAAQ,CAAC+D,YAAY,CAACC,KAAD,CAAb,CAAR,CAEA,MAAOxD,CAAAA,KAAK,CAACjB,OAAO,CAAG,aAAX,CAA0B,CAClCkB,MAAM,CAAE,MAD0B,CAElCI,OAAO,CAAE,CACL,eAAe,kBADV,CAFyB,CAKlCH,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeoD,KAAf,CAL4B,CAA1B,CAAL,CAONjD,IAPM,CAOD,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACb,MAAOD,CAAAA,QAAP,CACH,CAFD,IAEO,CACH,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACH,CACA,CAfE,CAgBH,SAAAA,KAAK,CAAI,CACL,KAAMA,CAAAA,KAAN,CACH,CAlBE,EAmBNH,IAnBM,CAmBD,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAnBP,EAoBNT,IApBM,CAoBD,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACwD,OAAb,CAAsB,CAClB;AACAlE,YAAY,CAACmE,OAAb,CAAqB,OAArB,CAA8BzD,QAAQ,CAACoD,KAAvC,EACA9D,YAAY,CAACmE,OAAb,CAAqB,OAArB,CAA8B9D,IAAI,CAACC,SAAL,CAAeoD,KAAf,CAA9B,EACA;AACAhE,QAAQ,CAAC0E,cAAc,EAAf,CAAR,CACA1E,QAAQ,CAACkE,YAAY,CAAClD,QAAD,CAAb,CAAR,CACH,CAPD,IAQK,CACD,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAA9B,CAAZ,CACAF,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACH,CACJ,CAlCM,EAmCNO,KAnCM,CAmCA,SAAAP,KAAK,QAAIlB,CAAAA,QAAQ,CAACqE,UAAU,CAACnD,KAAK,CAACK,OAAP,CAAX,CAAZ,EAnCL,CAAP,CAoCH,CAxCwB,EAAlB,CA0CP,MAAO,IAAMoD,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC/B,MAAO,CACLjF,IAAI,CAAEJ,WAAW,CAACsF,cADb,CAAP,CAGH,CAJM,CAMP,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC/B,MAAO,CACLnF,IAAI,CAAEJ,WAAW,CAACwF,cADb,CAAP,CAGH,CAJM,CAMP;AACA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,SAAM,UAAC/E,QAAD,CAAc,CAC1CA,QAAQ,CAAC2E,aAAa,EAAd,CAAR,CACArE,YAAY,CAAC0E,UAAb,CAAwB,OAAxB,EACA1E,YAAY,CAAC0E,UAAb,CAAwB,OAAxB,EACAhF,QAAQ,CAACiF,eAAe,CAAC,yBAAD,CAAhB,CAAR,CACAjF,QAAQ,CAAC6E,aAAa,EAAd,CAAR,CACH,CANyB,EAAnB,CAQP,MAAO,IAAMK,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACpF,MAAD,QAAY,UAACE,QAAD,CAAc,CAElD,GAAMK,CAAAA,MAAM,CAAG,UAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B,CAEA,MAAOC,CAAAA,KAAK,CAACjB,OAAO,CAAG,YAAV,CAAyBO,MAA1B,CAAkC,CAC1CW,MAAM,CAAE,MADkC,CAE1CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAC,MAAOd,MAAR,CAAf,CAFoC,CAG1Ce,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,gBAAiBR,MAFV,CAHiC,CAO1CS,WAAW,CAAE,aAP6B,CAAlC,CAAL,CASNC,IATM,CASD,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACf,MAAOD,CAAAA,QAAP,CACD,CAFD,IAEO,CACL,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACD,CACF,CAjBI,CAkBL,SAAAA,KAAK,CAAI,CACH,KAAMA,CAAAA,KAAN,CACL,CApBI,EAqBNH,IArBM,CAqBD,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EArBP,EAsBNT,IAtBM,CAsBD,SAAAoE,SAAS,CAAI,CAAEhF,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8B+E,SAA9B,EAA0CnF,QAAQ,CAACoF,YAAY,CAACD,SAAD,CAAb,CAAR,CAAoC,CAtB5F,EAuBN1D,KAvBM,CAuBA,SAAAP,KAAK,QAAIlB,CAAAA,QAAQ,CAACiF,eAAe,CAAC/D,KAAK,CAACK,OAAP,CAAhB,CAAZ,EAvBL,CAAP,CAwBH,CA5B2B,EAArB,CA8BP,MAAO,IAAM8D,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACvF,MAAD,QAAY,UAACE,QAAD,CAAc,CAEpD,GAAMK,CAAAA,MAAM,CAAG,UAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B,CAEA,MAAOC,CAAAA,KAAK,CAACjB,OAAO,CAAG,YAAV,CAAyBO,MAA1B,CAAkC,CAC1CW,MAAM,CAAE,QADkC,CAE1CI,OAAO,CAAE,CACP,gBAAiBR,MADV,CAFiC,CAK1CS,WAAW,CAAE,aAL6B,CAAlC,CAAL,CAONC,IAPM,CAOD,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACf,MAAOD,CAAAA,QAAP,CACD,CAFD,IAEO,CACL,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACD,CACF,CAfI,CAgBL,SAAAA,KAAK,CAAI,CACH,KAAMA,CAAAA,KAAN,CACL,CAlBI,EAmBNH,IAnBM,CAmBD,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAnBP,EAoBNT,IApBM,CAoBD,SAAAoE,SAAS,CAAI,CAAEhF,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAgC+E,SAAhC,EAA4CnF,QAAQ,CAACoF,YAAY,CAACD,SAAD,CAAb,CAAR,CAAoC,CApB9F,EAqBN1D,KArBM,CAqBA,SAAAP,KAAK,QAAIlB,CAAAA,QAAQ,CAACiF,eAAe,CAAC/D,KAAK,CAACK,OAAP,CAAhB,CAAZ,EArBL,CAAP,CAsBH,CA1B6B,EAAvB,CA4BP,MAAO,IAAMmD,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,SAAM,UAAC1E,QAAD,CAAc,CAC9CA,QAAQ,CAACsF,gBAAgB,CAAC,IAAD,CAAjB,CAAR,CAEA,GAAMjF,CAAAA,MAAM,CAAG,UAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B,CAEA,MAAOC,CAAAA,KAAK,CAACjB,OAAO,CAAG,WAAX,CAAwB,CAChCsB,OAAO,CAAE,CACL,gBAAiBR,MADZ,CADuB,CAAxB,CAAL,CAKNU,IALM,CAKD,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACb,MAAOD,CAAAA,QAAP,CACH,CAFD,IAGK,CACD,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACH,CACJ,CAdM,CAeP,SAAAA,KAAK,CAAI,CACL,GAAII,CAAAA,OAAO,CAAG,GAAIH,CAAAA,KAAJ,CAAUD,KAAK,CAACK,OAAhB,CAAd,CACA,KAAMD,CAAAA,OAAN,CACH,CAlBM,EAmBNP,IAnBM,CAmBD,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAnBP,EAoBNT,IApBM,CAoBD,SAAAoE,SAAS,QAAInF,CAAAA,QAAQ,CAACoF,YAAY,CAACD,SAAD,CAAb,CAAZ,EApBR,EAqBN1D,KArBM,CAqBA,SAAAP,KAAK,QAAIlB,CAAAA,QAAQ,CAACiF,eAAe,CAAC/D,KAAK,CAACK,OAAP,CAAhB,CAAZ,EArBL,CAAP,CAsBH,CA3B6B,EAAvB,CA6BP,MAAO,IAAM+D,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,SAAO,CACnC5F,IAAI,CAAEJ,WAAW,CAACiG,iBADiB,CAAP,EAAzB,CAIP,MAAO,IAAMN,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAC3D,OAAD,QAAc,CACzC5B,IAAI,CAAEJ,WAAW,CAACkG,gBADuB,CAEzC5F,OAAO,CAAE0B,OAFgC,CAAd,EAAxB,CAKP,MAAO,IAAM8D,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACD,SAAD,QAAgB,CACxCzF,IAAI,CAAEJ,WAAW,CAACmG,aADsB,CAExC7F,OAAO,CAAEuF,SAF+B,CAAhB,EAArB,CAKP,MAAO,IAAMO,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,OAAD,QAAc,CACjCjG,IAAI,CAAEJ,WAAW,CAACsG,QADe,CAEjChG,OAAO,CAAE+F,OAFwB,CAAd,EAAhB,CAKP,MAAO,IAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACF,OAAD,QAAa,UAAC3F,QAAD,CAAc,CAEnD,MAAOQ,CAAAA,KAAK,CAACjB,OAAO,CAAG,cAAX,CAA2B,CACnCkB,MAAM,CAAE,MAD2B,CAEnCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe+E,OAAf,CAF6B,CAGnC9E,OAAO,CAAE,CACP,eAAgB,kBADT,CAH0B,CAMnCC,WAAW,CAAE,aANsB,CAA3B,CAAL,CAQNC,IARM,CAQD,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACf,MAAOD,CAAAA,QAAP,CACD,CAFD,IAEO,CACL,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACD,CACF,CAhBI,CAiBL,SAAAA,KAAK,CAAI,CACH,KAAMA,CAAAA,KAAN,CACL,CAnBI,EAoBNH,IApBM,CAoBD,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EApBP,EAqBNT,IArBM,CAqBD,SAAAC,QAAQ,QAAIhB,CAAAA,QAAQ,CAAC0F,OAAO,CAAC1E,QAAD,CAAR,CAAZ,EArBP,EAsBND,IAtBM,CAsBD,SAAAC,QAAQ,CAAI,CAAEb,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBY,QAAvB,EAAkCU,KAAK,CAAC,iCAAiCf,IAAI,CAACC,SAAL,CAAeI,QAAf,CAAlC,CAAL,CAAmE,CAtBlH,EAuBNS,KAvBM,CAuBA,SAAAP,KAAK,CAAK,CAAEf,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBc,KAAK,CAACK,OAA7B,EAAuCG,KAAK,CAAC,mCAAmCR,KAAK,CAACK,OAA1C,CAAL,CAA0D,CAvB7G,CAAP,CAwBH,CA1B2B,EAArB,CA6BP,MAAO,IAAMuE,CAAAA,sBAAsB,CAAG,wBAA/B,CACP,MAAO,IAAMC,CAAAA,sBAAsB,CAAG,wBAA/B,CACP,MAAO,IAAMC,CAAAA,sBAAsB,CAAG,wBAA/B,CAGP,MAAO,IAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CACtC,MAAO,CACHvG,IAAI,CAAEJ,WAAW,CAACwG,sBADf,CAAP,CAGH,CAJM,CAMP,MAAO,IAAMI,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAAClF,QAAD,CAAc,CAC9C,MAAO,CACHtB,IAAI,CAAEJ,WAAW,CAACyG,sBADf,CAEH3B,KAAK,CAAEpD,QAAQ,CAACoD,KAFb,CAAP,CAIH,CALM,CAOP,MAAO,IAAM+B,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAC5E,OAAD,CAAa,CAC3C,MAAO,CACH7B,IAAI,CAAEJ,WAAW,CAAC0G,sBADf,CAEHzE,OAAO,CAAPA,OAFG,CAAP,CAIH,CALM,CAOP,MAAO,IAAM6E,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,SAAM,UAACpG,QAAD,CAAc,CACjD;AACAA,QAAQ,CAACiG,oBAAoB,EAArB,CAAR,CAEA,MAAOzF,CAAAA,KAAK,CAACjB,OAAO,CAAG,sBAAX,CAAL,CACNwB,IADM,CACD,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACbd,OAAO,CAACC,GAAR,CAAY,0BAA0BY,QAAtC,EACA,MAAOA,CAAAA,QAAP,CACH,CAHD,IAGO,CACH,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAAvD,CAAZ,CACAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACH,CACA,CAVE,CAWH,SAAAA,KAAK,CAAI,CACL,KAAMA,CAAAA,KAAN,CACH,CAbE,EAcNH,IAdM,CAcD,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAdP,EAeNT,IAfM,CAeD,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACwD,OAAb,CAAsB,CAClB;AACAlE,YAAY,CAACmE,OAAb,CAAqB,OAArB,CAA8BzD,QAAQ,CAACoD,KAAvC,EACD;AACC;AACApE,QAAQ,CAAC0E,cAAc,EAAf,CAAR,CACA1E,QAAQ,CAACkG,oBAAoB,CAAClF,QAAD,CAArB,CAAR,CACH,CAPD,IAQK,CACD,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAU,SAAWH,QAAQ,CAACI,MAA9B,CAAZ,CACAF,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACH,CACJ,CA7BM,EA8BNO,KA9BM,CA8BA,SAAAP,KAAK,QAAIlB,CAAAA,QAAQ,CAACmG,kBAAkB,CAACjF,KAAK,CAACK,OAAP,CAAnB,CAAZ,EA9BL,CAAP,CA+BH,CAnCgC,EAA1B","sourcesContent":["import * as ActionTypes from './ActionTypes';\nimport { baseUrl } from '../shared/baseUrl';\n\nexport const addComment = (comment) => ({\n    type: ActionTypes.ADD_COMMENT,\n    payload: comment\n});\n\nexport const postComment = (dishId, rating, comment) => (dispatch) => {\n\n    const newComment = {\n        dish: dishId,\n        rating: rating,\n        comment: comment\n    }\n    console.log('Comment ', newComment);\n\n    const bearer = 'Bearer ' + localStorage.getItem('token');\n\n    return fetch(baseUrl + 'comments', {\n        method: 'POST',\n        body: JSON.stringify(newComment),\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': bearer\n        },\n        credentials: 'same-origin'\n    })\n    .then(response => {\n        if (response.ok) {\n            return response;\n        }\n        else {\n            var error = new Error('Error ' + response.status + ': ' + response.statusText);\n            error.response = response;\n            throw error;\n        }\n    },\n    error => {\n        var errmess = new Error(error.message);\n        throw errmess;\n    })\n    .then(response => response.json())\n    .then(response => dispatch(addComment(response)))\n    .catch(error => { console.log('Post comments ', error.message);\n        alert('Your comment could not be posted\\nError: '+ error.message); })\n}\n\nexport const fetchDishes = () => (dispatch) => {\n    dispatch(dishesLoading(true));\n\n    return fetch(baseUrl + 'dishes')\n        .then(response => {\n            if (response.ok) {\n                return response;\n            }\n            else {\n                var error = new Error('Error ' + response.status + ': ' + response.statusText);\n                error.response = response;\n                throw error;\n            }\n        },\n        error => {\n            var errmess = new Error(error.message);\n            throw errmess;\n        })\n        .then(response => response.json())\n        .then(dishes => dispatch(addDishes(dishes)))\n        .catch(error => dispatch(dishesFailed(error.message)));\n}\n\nexport const dishesLoading = () => ({\n    type: ActionTypes.DISHES_LOADING\n});\n\nexport const dishesFailed = (errmess) => ({\n    type: ActionTypes.DISHES_FAILED,\n    payload: errmess\n});\n\nexport const addDishes = (dishes) => ({\n    type: ActionTypes.ADD_DISHES,\n    payload: dishes\n});\n\nexport const fetchComments = () => (dispatch) => {\n    return fetch(baseUrl + 'comments')\n        .then(response => {\n            if (response.ok) {\n                return response;\n            }\n            else {\n                var error = new Error('Error ' + response.status + ': ' + response.statusText);\n                error.response = response;\n                throw error;\n            }\n        },\n        error => {\n            var errmess = new Error(error.message);\n            throw errmess;\n        })\n        .then(response => response.json())\n        .then(comments => dispatch(addComments(comments)))\n        .catch(error => dispatch(commentsFailed(error.message)));\n}\n\nexport const commentsFailed = (errmess) => ({\n    type: ActionTypes.COMMENTS_FAILED,\n    payload: errmess\n});\n\nexport const addComments = (comments) => ({\n    type: ActionTypes.ADD_COMMENTS,\n    payload: comments\n});\n\nexport const fetchPromos = () => (dispatch) => {\n    dispatch(promosLoading(true));\n\n    return fetch(baseUrl + 'promotions')\n        .then(response => {\n            if (response.ok) {\n                return response;\n            }\n            else {\n                var error = new Error('Error ' + response.status + ': ' + response.statusText);\n                error.response = response;\n                throw error;\n            }\n        },\n        error => {\n            var errmess = new Error(error.message);\n            throw errmess;\n        })\n        .then(response => response.json())\n        .then(promos => dispatch(addPromos(promos)))\n        .catch(error => dispatch(promosFailed(error.message)));\n}\n\nexport const promosLoading = () => ({\n    type: ActionTypes.PROMOS_LOADING\n});\n\nexport const promosFailed = (errmess) => ({\n    type: ActionTypes.PROMOS_FAILED,\n    payload: errmess\n});\n\nexport const addPromos = (promos) => ({\n    type: ActionTypes.ADD_PROMOS,\n    payload: promos\n});\n\nexport const fetchLeaders = () => (dispatch) => {\n    \n    dispatch(leadersLoading());\n\n    return fetch(baseUrl + 'leaders')\n    .then(response => {\n        if (response.ok) {\n            return response;\n        } else {\n            var error = new Error('Error ' + response.status + ': ' + response.statusText);\n            error.response = response;\n            throw error;\n        }\n        },\n        error => {\n            var errmess = new Error(error.message);\n            throw errmess;\n        })\n    .then(response => response.json())\n    .then(leaders => dispatch(addLeaders(leaders)))\n    .catch(error => dispatch(leadersFailed(error.message)));\n}\n\nexport const leadersLoading = () => ({\n    type: ActionTypes.LEADERS_LOADING\n});\n\nexport const leadersFailed = (errmess) => ({\n    type: ActionTypes.LEADERS_FAILED,\n    payload: errmess\n});\n\nexport const addLeaders = (leaders) => ({\n    type: ActionTypes.ADD_LEADERS,\n    payload: leaders\n});\n\n\nexport const feedbackFailed = (errmess) => ({\n    type: ActionTypes.FEEDBACK_FAILED,\n    payload: errmess\n  });\n  \n  export const addFeedback = (feedback) => ({\n    type: ActionTypes.ADD_FEEDBACK,\n    payload: feedback\n  });\n\nexport const postFeedback = (feedback) => (dispatch) => {\n        \n    return fetch(baseUrl + 'feedbacks', {\n        method: \"POST\",\n        body: JSON.stringify(feedback),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"same-origin\"\n    })\n    .then(response => {\n        if (response.ok) {\n          return response;\n        } else {\n          var error = new Error('Error ' + response.status + ': ' + response.statusText);\n          error.response = response;\n          throw error;\n        }\n      },\n      error => {\n            throw error;\n      })\n    .then(response => response.json())\n    .then(response => dispatch(addFeedback(response)))\n    .then(response => { console.log('Feedback', response); alert('Thank you for your feedback!\\n'+JSON.stringify(response)); })\n    .catch(error =>  { console.log('Feedback', error.message); alert('Your feedback could not be posted\\nError: '+error.message); });\n};\n\nexport const requestLogin = (creds) => {\n    return {\n        type: ActionTypes.LOGIN_REQUEST,\n        creds\n    }\n}\n  \nexport const receiveLogin = (response) => {\n    return {\n        type: ActionTypes.LOGIN_SUCCESS,\n        token: response.token\n    }\n}\n  \nexport const loginError = (message) => {\n    return {\n        type: ActionTypes.LOGIN_FAILURE,\n        message\n    }\n}\n\nexport const loginUser = (creds) => (dispatch) => {\n    // We dispatch requestLogin to kickoff the call to the API\n    dispatch(requestLogin(creds))\n\n    return fetch(baseUrl + 'users/login', {\n        method: 'POST',\n        headers: { \n            'Content-Type':'application/json' \n        },\n        body: JSON.stringify(creds)\n    })\n    .then(response => {\n        if (response.ok) {\n            return response;\n        } else {\n            var error = new Error('Error ' + response.status + ': ' + response.statusText);\n            error.response = response;\n            throw error;\n        }\n        },\n        error => {\n            throw error;\n        })\n    .then(response => response.json())\n    .then(response => {\n        if (response.success) {\n            // If login was successful, set the token in local storage\n            localStorage.setItem('token', response.token);\n            localStorage.setItem('creds', JSON.stringify(creds));\n            // Dispatch the success action\n            dispatch(fetchFavorites());\n            dispatch(receiveLogin(response));\n        }\n        else {\n            var error = new Error('Error ' + response.status);\n            error.response = response;\n            throw error;\n        }\n    })\n    .catch(error => dispatch(loginError(error.message)))\n};\n\nexport const requestLogout = () => {\n    return {\n      type: ActionTypes.LOGOUT_REQUEST\n    }\n}\n  \nexport const receiveLogout = () => {\n    return {\n      type: ActionTypes.LOGOUT_SUCCESS\n    }\n}\n\n// Logs the user out\nexport const logoutUser = () => (dispatch) => {\n    dispatch(requestLogout())\n    localStorage.removeItem('token');\n    localStorage.removeItem('creds');\n    dispatch(favoritesFailed(\"Error 401: Unauthorized\"));\n    dispatch(receiveLogout())\n}\n\nexport const postFavorite = (dishId) => (dispatch) => {\n\n    const bearer = 'Bearer ' + localStorage.getItem('token');\n\n    return fetch(baseUrl + 'favorites/' + dishId, {\n        method: \"POST\",\n        body: JSON.stringify({\"_id\": dishId}),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          'Authorization': bearer\n        },\n        credentials: \"same-origin\"\n    })\n    .then(response => {\n        if (response.ok) {\n          return response;\n        } else {\n          var error = new Error('Error ' + response.status + ': ' + response.statusText);\n          error.response = response;\n          throw error;\n        }\n      },\n      error => {\n            throw error;\n      })\n    .then(response => response.json())\n    .then(favorites => { console.log('Favorite Added', favorites); dispatch(addFavorites(favorites)); })\n    .catch(error => dispatch(favoritesFailed(error.message)));\n}\n\nexport const deleteFavorite = (dishId) => (dispatch) => {\n\n    const bearer = 'Bearer ' + localStorage.getItem('token');\n\n    return fetch(baseUrl + 'favorites/' + dishId, {\n        method: \"DELETE\",\n        headers: {\n          'Authorization': bearer\n        },\n        credentials: \"same-origin\"\n    })\n    .then(response => {\n        if (response.ok) {\n          return response;\n        } else {\n          var error = new Error('Error ' + response.status + ': ' + response.statusText);\n          error.response = response;\n          throw error;\n        }\n      },\n      error => {\n            throw error;\n      })\n    .then(response => response.json())\n    .then(favorites => { console.log('Favorite Deleted', favorites); dispatch(addFavorites(favorites)); })\n    .catch(error => dispatch(favoritesFailed(error.message)));\n};\n\nexport const fetchFavorites = () => (dispatch) => {\n    dispatch(favoritesLoading(true));\n\n    const bearer = 'Bearer ' + localStorage.getItem('token');\n\n    return fetch(baseUrl + 'favorites', {\n        headers: {\n            'Authorization': bearer\n        },\n    })\n    .then(response => {\n        if (response.ok) {\n            return response;\n        }\n        else {\n            var error = new Error('Error ' + response.status + ': ' + response.statusText);\n            error.response = response;\n            throw error;\n        }\n    },\n    error => {\n        var errmess = new Error(error.message);\n        throw errmess;\n    })\n    .then(response => response.json())\n    .then(favorites => dispatch(addFavorites(favorites)))\n    .catch(error => dispatch(favoritesFailed(error.message)));\n}\n\nexport const favoritesLoading = () => ({\n    type: ActionTypes.FAVORITES_LOADING\n});\n\nexport const favoritesFailed = (errmess) => ({\n    type: ActionTypes.FAVORITES_FAILED,\n    payload: errmess\n});\n\nexport const addFavorites = (favorites) => ({\n    type: ActionTypes.ADD_FAVORITES,\n    payload: favorites\n});\n\nexport const addUser = (newUser) => ({\n    type: ActionTypes.ADD_USER,\n    payload: newUser\n});\n\nexport const registerUser = (newUser) => (dispatch) => {\n\n    return fetch(baseUrl + 'users/signup', {\n        method: \"POST\",\n        body: JSON.stringify(newUser),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"same-origin\"\n    })\n    .then(response => {\n        if (response.ok) {\n          return response;\n        } else {\n          var error = new Error('Error ' + response.status + ': ' + response.statusText);\n          error.response = response;\n          throw error;\n        }\n      },\n      error => {\n            throw error;\n      })\n    .then(response => response.json())\n    .then(response => dispatch(addUser(response)))\n    .then(response => { console.log('newUser', response); alert('Thank you for your Register!\\n'+JSON.stringify(response)); })\n    .catch(error =>  { console.log('NewUser', error.message); alert('Your could not register\\nError: '+error.message); });\n};\n\n\nexport const LOGIN_REQUEST_FACEBOOK = 'LOGIN_REQUEST_FACEBOOK';\nexport const LOGIN_SUCCESS_FACEBOOK = 'LOGIN_SUCCESS_FACEBOOK';\nexport const LOGIN_FAILURE_FACEBOOK = 'LOGIN_FAILURE_FACEBOOK';\n\n\nexport const requestLoginFacebook = () => {\n    return {\n        type: ActionTypes.LOGIN_REQUEST_FACEBOOK\n    }\n}\n  \nexport const receiveLoginFacebook = (response) => {\n    return {\n        type: ActionTypes.LOGIN_SUCCESS_FACEBOOK,\n        token: response.token\n    }\n}\n  \nexport const loginErrorFacebook = (message) => {\n    return {\n        type: ActionTypes.LOGIN_FAILURE_FACEBOOK,\n        message\n    }\n}\n\nexport const loginUserFacebook = () => (dispatch) => {\n    // We dispatch requestLogin to kickoff the call to the API\n    dispatch(requestLoginFacebook())\n\n    return fetch(baseUrl + 'users/facebook/token')\n    .then(response => {\n        if (response.ok) {\n            console.log('resopnse...............'+response);\n            return response;\n        } else {\n            var error = new Error('Error ' + response.status + ': ' + response.statusText);\n            error.response = response;\n            throw error;\n        }\n        },\n        error => {\n            throw error;\n        })\n    .then(response => response.json())\n    .then(response => {\n        if (response.success) {\n            // If login was successful, set the token in local storage\n            localStorage.setItem('token', response.token);\n           // localStorage.setItem('creds', JSON.stringify(creds));\n            // Dispatch the success action\n            dispatch(fetchFavorites());\n            dispatch(receiveLoginFacebook(response));\n        }\n        else {\n            var error = new Error('Error ' + response.status);\n            error.response = response;\n            throw error;\n        }\n    })\n    .catch(error => dispatch(loginErrorFacebook(error.message)))\n};"]},"metadata":{},"sourceType":"module"}